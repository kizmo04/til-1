# Database Schema Design

## SQL vs NoSQL

SQL과 NoSQL의 차이와 각각의 장단점

### SQL (Structured Query Language)

**관계형 데이터베이스**
데이터베이스자체를 말하는게 아니라
데이터베이스와 상호 작용하는 데 사용 하는 쿼리 언어를 말한다.

SQL is ths language we use to 'talk' to our database

SQL을 사용하면 관계형 데이터베이스 관리 시스템(RDBMS)에서 데이터를 저장, 수정, 삭제 및 검색 할 수 있다.

* 데이터는 정해진(엄격한) 데이터 스키마 (= structure)를 따라 데이터베이스 테이블에 저장됩니다.
  * 스키마를 준수하지 않는 레코드는 추가할 수 없다.
* 데이터는 관계를 통해서 연결된 여러개의 테이블에 분산됩니다.
  * 중복된 데이터가 없습니다.
* PostgreSql, MySQL, Oracle, Microsoft SQL Server

### NoSQL

**비관계형 데이터베이스**

* 스키마 없음
* 관계 없음
  * 관련 데이터를 동일한 컬렉션에 넣는다.
  * 관계형 데이터베이스처럼 여러 테이블에 나누어 담지 않습니다.
  * 중복된 데이터가 있을 수 있기 때문에 여러개의 컬렉션들을 수정해야 한다. 빼먹으면 안된다.

레코드를 문서(documents)라고 부른다.
문서는 JSON 데이터와 비슷한 형태를 가지고 있다.

Redis, RavenDB, Cassandra, MongoDB, BigTable, HBase, Neo4j and CouchDB

#### [수직적(Vertical) & 수평적(Horizontal) 확장(Scaling)]

* 수직적 확장
  * 단순히 데이터베이스 서버의 성능만 향상
  * SQL은 수직적 확장만 가능
* 수평적 확장
  * 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산됨
  * NoSQL 가능

### 장단점

**SQL의 장점**

* 명확하게 정의 된 스키마, 데이터 무결성 보장
* 관계는 각 데이터를 중복없이 한번만 저장됨
* 구조가 잘 잡혀 있다.
* 서치가 빠르다.
* 튼튼하다.
* db가 죽는 일은 드물다.

**SQL의 단점**

* 덜 유연하다, 데이터 스키마는 사전에 계획되고 알려져야 합니다.
* 관계를 맺고 있기 때문에 JOIN으로 매우 복잡하다.
* 수평적 확장이 어렵다.
* 성장 한계가 있다.
* 동접이 엄청많은 것은 DB는 write할 때마다 필요한 부분을 lock을 건다.
  * write와 read를 나눠놓는다.
  * DB를 여러개 만듬 아마존은... 

**NoSQL의 장점**

* 스키마가 없기 때문에, 훨씬 더 유연하다.
  * 언제든지 저장된 데이터를 조정하고 새로운 "필드"를 추가 할 수 있다.
* 데이터는 애플리케이션이 필요로 하는 형식으로 저장
  * 데이터를 읽어오는 속도가 빨라진다.
* 수직 및 수평 확장이 가능하므로 데이터베이스가 애플리케이션에서 발생시키는 모든 읽기 / 쓰기 요청을 처리 할 수 있다.
* 트렐로! 보드에 글올리고 카드가 빨리 빨리 바뀐다.
* 분산시스템, 분산db, 자체적으로 분산.. 
* sql보다 비싸다.
* 광범위한 필터

**NoSQL의 단점**

* 유연성 때문에 데이터 구조 결정을 하지 못하고 미루게 된다.
* 데이터 중복은 여러 컬렉션을 업데이트 시켜줘야 한다.

**SQL 사용은?**

* 관계를 맺고 있는 데이터가 자주 변경될 경우
* 명확한 스키마가 사용자와 데이터에 중요할 경우

**NoSQL 사용은?**

* 정확한 데이터 구조를 알 수 없거나 변경/ 확장 될 수 있는 경우

* 읽기는 자주 하지만 변경되지 않는경우

* 데이터베이스를 수평으로 확장해야 하는 경우

  * 막대한 데이터를 다뤄야 하는 경우

  







